<% module_path[..-2].each do |part| %>
module <%= part %>
<% end %>

foobara_register_type :<%= Util.underscore(module_path.last) %>, :string, :downcase

<% module_path.size.times do %>
end
<% end %>
